<template>
  <div class="button-container">
    <lightning-button-group>
      <lightning-button variant="brand" label="Agent" title="Agent" onclick={handleAgentClick}></lightning-button>
      <lightning-button variant="brand" label="Policy Holder" title="Policy Holder" onclick={handlePolicyHolderClick}></lightning-button>
      <lightning-button variant="brand" label="Life Insurance" title="Life Insurance" onclick={handleLifeInsuranceClick}></lightning-button>
      <lightning-button variant="brand" label="Motor Insurance" title="Motor Insurance" onclick={handleMotorInsuranceClick}></lightning-button>
    </lightning-button-group>

    <template if:true={showAgentButtons}>
      <lightning-button-group>
        <lightning-button variant="brand" label="Add Agent" title="Add Agent" onclick={handleAddAgentClick}></lightning-button>
        <lightning-button variant="brand" label="View Agent" title="View Agent"></lightning-button>
        
      </lightning-button-group>

      <template if:true={showAddAgentForm}>
        <lightning-record-edit-form object-api-name="Agent__c" onsubmit={handleAgentSubmit} onsuccess={handleAgentSuccess}>
          <lightning-messages></lightning-messages>
          <lightning-input-field field-name='Name'></lightning-input-field>
          <lightning-input-field field-name='DOB__c'></lightning-input-field>
          <lightning-input-field field-name='Gender__c'></lightning-input-field>
          <lightning-input-field field-name='Phone__c'></lightning-input-field>
          <lightning-input-field field-name='Email__c'></lightning-input-field>
          <lightning-input-field field-name='Reg_Date__c'></lightning-input-field>
          <lightning-input-field field-name='Address__c'></lightning-input-field>
          <lightning-button-group>
              <lightning-button variant="success" label="Save" title="Save" onclick={handleAgentSave} class="slds-m-left_x-small"></lightning-button>
              <lightning-button variant="destructive" label="Cancle" title="Cancle" onclick={handleAgentCancle} class="slds-m-left_x-small"></lightning-button>
            
          </lightning-button-group>
        </lightning-record-edit-form>
      </template>
      <template if:true={showAgentList}>
          <lightning-card title="Select an Agent" icon-name="standard:people">
            <template for:each={agentRecords} for:item="agent">
              <lightning-button key={agent.Id} label={agent.Name} title={agent.Name} onclick={handleAgentSelect} value={agent.Id} class="slds-m-around_x-small"></lightning-button>
            </template>
          </lightning-card>
        </template>
        
      <template if:true={showViewAgentForm}>
          <lightning-record-view-form record-id={agentRecordId} object-api-name="Agent__c"  onsuccess={handleAgentViewSuccess}>
            <lightning-messages></lightning-messages>
            <lightning-output-field field-name='Name'></lightning-output-field>
            <lightning-output-field field-name='DOB__c'></lightning-output-field>
            <lightning-output-field field-name='Gender__c'></lightning-output-field>
            <lightning-output-field field-name='Phone__c'></lightning-output-field>
            <lightning-output-field field-name='Email__c'></lightning-output-field>
            <lightning-output-field field-name='Reg_Date__c'></lightning-output-field>
            <lightning-output-field field-name='Address__c'></lightning-output-field>
            <lightning-button variant="success" label="Edit" title="Edit" onclick={handleAgentEdit} class="slds-m-left_x-small"></lightning-button>
            <lightning-button variant="destructive" label="Delete" title="Delete" onclick={handleAgentDelete} class="slds-m-left_x-small"></lightning-button>
          </lightning-record-view-form>
        </template>
        
    </template>
    
    
  </div>
</template>